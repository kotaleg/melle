image: ubuntu:18.04

before_script:
  - apt-get update && apt-get install -y --no-install-recommends -qq apt-utils
  - apt-get install -qq curl
  - apt-get install -qq gnupg
  - apt-get install -qq gnupg1
  - apt-get install -qq gnupg2
  - apt-get install -qq zip unzip
  - curl -sS https://dl.yarnpkg.com/debian/pubkey.gpg | apt-key add -
  - echo "deb https://dl.yarnpkg.com/debian/ stable main" | tee /etc/apt/sources.list.d/yarn.list
  - apt-get update -qq
  - apt-get install -y -qq sshpass
  - apt-get install -y -qq nodejs
  - nodejs --version
  - apt-get install -y -qq npm
  - npm --version
  - apt-get install -y -qq yarn
  - yarn --version

deploy_stage:
  stage: deploy
  environment: Staging
  only:
    - master
  script:
    - chmod +x ./build.sh
    - ./build.sh
<?xml version="1.0" encoding="utf-8"?>
<modification>
    <name>melle_catalog_admin</name>
    <code>melle_catalog_admin</code>
    <description>Melle Catalog Admin</description>
    <version>1.0.0</version>
    <author>PRO Hamster</author>
    <link>http://prohamster.com</link>

    <file path="admin/model/catalog/category.php">
        <operation error="skip">
            <search><![CDATA['description'      => $result['description']]]></search>
            <add position="replace"><![CDATA[
                /* IVAN MOD START */
                'description'       => $result['description'],
                'small_description' => $result['small_description'],
                'h1'                => $result['h1'],
                /* IVAN MOD END */
            ]]></add>
        </operation>

        <operation error="skip">
            <search><![CDATA[meta_keyword = '" . $this->db->escape($value['meta_keyword']) . "'");]]></search>
            <add position="replace"><![CDATA[
                meta_keyword = '" . $this->db->escape($value['meta_keyword']) . "', `small_description` = '".$this->db->escape($value['small_description'])."', `h1` = '".$this->db->escape($value['h1'])."'");
            ]]></add>
        </operation>
    </file>

    <file path="admin/controller/catalog/category.php">
        <operation error="skip">
            <search><![CDATA[$data['layouts'] = $this->model_design_layout->getLayouts();]]></search>
            <add position="after"><![CDATA[
                /* IVAN MOD START */
                $data['entry_small_description'] = $this->language->get('entry_small_description');
                $data['entry_h1'] = $this->language->get('entry_h1');
                /* IVAN MOD END */
            ]]></add>
        </operation>
    </file>

    <file path="admin/language/en-gb/catalog/category.php">
        <operation error="skip">
            <search regex="true" limit="1"><![CDATA[($)]]></search>
            <add position="before"><![CDATA[
                /* IVAN MOD START */
                $_['entry_small_description'] = 'Краткое описание';
                $_['entry_h1'] = 'H1';
                /* IVAN MOD END */
            ]]></add>
        </operation>
    </file>

    <file path="admin/view/template/catalog/category_form.twig">
        <operation error="skip">
            <search><![CDATA[<label class="col-sm-2 control-label" for="input-description{{ language.language_id }}">{{ entry_description }}</label>]]></search>
            <add position="before" offset="1"><![CDATA[
                  <!-- IVAN MOD START -->
                  <div class="form-group">
                    <label class="col-sm-2 control-label" for="input-h1{{ language.language_id }}"><span data-toggle="tooltip" title="{{ entry_h1 }}">{{ entry_h1 }}</span></label>
                    <div class="col-sm-10">
                      <input type="text" name="product_description[{{ language.language_id }}][h1]" value="{{ product_description[language.language_id] ? product_description[language.language_id].h1 }}" placeholder="{{ entry_h1 }}" id="input-h1{{ language.language_id }}" class="form-control" />
                    </div>
                  </div>
                  <!-- IVAN MOD END -->

                  <!-- IVAN MOD START -->
                  <div class="form-group">
                    <label class="col-sm-2 control-label" for="input-small-description{{ language.language_id }}">{{ entry_small_description }}</label>
                    <div class="col-sm-10">
                      <textarea name="product_description[{{ language.language_id }}][small_description]" placeholder="{{ entry_small_description }}" id="input-small-description{{ language.language_id }}" rows="5" data-toggle="summernote" data-lang="{{ summernote }}" class="form-control">{{ product_description[language.language_id] ? product_description[language.language_id].small_description }}</textarea>
                    </div>
                  </div>
                  <!-- IVAN MOD END -->
            ]]></add>
        </operation>
    </file>


</modification>
